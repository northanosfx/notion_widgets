#include <SFML/Graphics.hpp>
#include <iostream>
#include <iomanip>
#include <string>
#include <vector>

using namespace std;

void calculatePosition(double accountBalance, double percentageRisk, double stopLoss) {
    if (accountBalance <= 0 || percentageRisk <= 0 || stopLoss <= 0) {
        cout << "Please fill in all fields correctly." << endl;
        return;
    }

    double cashRisk = accountBalance * (percentageRisk / 100);
    double positionSize = (cashRisk / stopLoss) * 10000;
    double standardLots = positionSize / 100000;

    cout << fixed << setprecision(2);
    cout << "Results:" << endl;
    cout << "Cash Risk: $" << cashRisk << endl;
    cout << "Position Size: " << positionSize << endl;
    cout << "Standard Lots: " << standardLots << endl;
}

int main() {
    double accountBalance, percentageRisk, stopLoss;
    string accountCurrency, currencyPair;

    vector<string> availablePairs = {"EURUSD", "USDJPY", "GBPUSD", "AUDUSD", "USDCAD", "USDCHF", "NZDUSD", "XAUUSD", "XAGUSD"};

    cout << "Enter Account Currency (e.g., USD): ";
    cin >> accountCurrency;

    cout << "Enter Account Balance: ";
    cin >> accountBalance;

    cout << "Enter Percentage Risk: ";
    cin >> percentageRisk;

    cout << "Enter Stop Loss in Pips: ";
    cin >> stopLoss;

    cout << "Available Currency Pairs: " << endl;
    for (const auto& pair : availablePairs) {
        cout << pair << " ";
    }
    cout << endl;

    cout << "Enter Currency Pair: ";
    cin >> currencyPair;

    if (find(availablePairs.begin(), availablePairs.end(), currencyPair) == availablePairs.end()) {
        cout << "Invalid currency pair entered." << endl;
        return 0;
    }

    calculatePosition(accountBalance, percentageRisk, stopLoss);

    // Create a window with SFML
    sf::RenderWindow window(sf::VideoMode(800, 600), "Position Calculator", sf::Style::None);
    window.setFramerateLimit(60);

    // Set background color (transparent)
    window.clear(sf::Color(0, 0, 0, 0));

    // Create a rectangle for the inner frame
    sf::RectangleShape innerFrame(sf::Vector2f(600, 400));
    innerFrame.setFillColor(sf::Color(25, 25, 25));
    innerFrame.setPosition(100, 100);

    while (window.isOpen()) {
        sf::Event event;
        while (window.pollEvent(event)) {
            if (event.type == sf::Event::Closed)
                window.close();
        }

        window.clear(sf::Color(0, 0, 0, 0)); // Transparent background
        window.draw(innerFrame);
        window.display();
    }

    return 0;
}
